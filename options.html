<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Auto Logout - Settings</title>
  <style>
    :root {
      --bg: #f7fafc;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #6b7280;
      --border: #e5e7eb;
      --primary: #3b82f6;
      --btn-bg: #0f766e;
      --btn-bg-hover: #0d5e58;
    }
    .dark :root, .dark {
      --bg: #0b0f14;
      --card: #0f172a;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --primary: #3b82f6;
      --btn-bg: #2563eb;
      --btn-bg-hover: #1d4ed8;
    }
    html, body { height: 100%; }
    body { margin: 0; font: 14px system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); color: var(--text); }
    .container { max-width: 820px; padding: 24px; margin: 0 auto; }
    h1 { margin: 0 0 16px; font-size: 22px; font-weight: 700; letter-spacing: -0.01em; }
    .grid { display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media (min-width: 720px) { .grid { grid-template-columns: 1fr 1fr; } }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px 16px 12px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    .section-title { font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: .06em; color: var(--muted); margin-bottom: 12px; }
    .field { margin-bottom: 18px; }
    .label { display: block; font-weight: 700; margin-bottom: 6px; }
    .help { font-size: 12px; color: var(--muted); margin-top: 4px; line-height: 1.4; }
    input[type="number"], input[type="color"], select, textarea { width: 100%; box-sizing: border-box; font: inherit; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--card); color: var(--text); }
    textarea { height: 140px; resize: vertical; }
    .row { display: flex; align-items: center; gap: 10px; }
    .save { margin-top: 18px; background: var(--btn-bg); color: #fff; border: none; border-radius: 10px; padding: 10px 14px; font-weight: 600; cursor: pointer; }
    .save:hover { background: var(--btn-bg-hover); }
    #status { margin-left: 10px; color: #22c55e; font-weight: 600; }
    /* Switch */
    .switch { position: relative; width: 44px; height: 24px; background: var(--border); border-radius: 999px; transition: background .2s; flex: 0 0 auto; }
    .switch::after { content: ""; position: absolute; top: 3px; left: 3px; width: 18px; height: 18px; background: #fff; border-radius: 50%; transition: transform .2s; box-shadow: 0 1px 2px rgba(0,0,0,.2); }
    .switch.on { background: var(--primary); }
    .switch.on::after { transform: translateX(20px); }
    /* Range */
    .range { width: 100%; }
    /* Custom range styling with theme color fill */
    .range { -webkit-appearance: none; appearance: none; height: 6px; border-radius: 999px;
      background: linear-gradient(var(--primary), var(--primary)) 0/var(--p,0%) 100% no-repeat, var(--border);
      outline: none; }
    .range::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%;
      background: var(--primary); border: 2px solid #fff; box-shadow: 0 1px 2px rgba(0,0,0,.25); cursor: pointer; }
    .range::-moz-range-track { height: 6px; border-radius: 999px; background: var(--border); }
    .range::-moz-range-progress { height: 6px; border-radius: 999px; background: var(--primary); }
    .range::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; background: var(--primary); border: 2px solid #fff; cursor: pointer; }
    .range-value { font-weight: 600; }
  </style>
  <script>
    // Live preview helpers (no inline module support here)
    function setDark(on) {
      document.documentElement.classList.toggle('dark', !!on);
    }
    function setPrimary(color) {
      document.documentElement.style.setProperty('--primary', color || '#3b82f6');
    }
  </script>
  </head>
<body>
  <div class="container">
    <h1>Auto Logout â€“ Settings</h1>

    <div class="grid">
      <div class="card">
        <div class="section-title">Time Limits</div>
        <div class="field">
          <label class="label">Work mode time (minutes)</label>
          <input id="limit" type="number" min="0.083" step="0.083" />
          <div class="help">Use 0.083 for a 5-second test.</div>
        </div>
        <div class="field">
          <label class="label">Break mode time (minutes)</label>
          <input id="breakLimit" type="number" min="1" step="1" />
          <div class="help">Default is 10 minutes.</div>
        </div>
        <div class="field">
          <label class="label">Warning sound (seconds before limit): <span id="warningValue" class="range-value">10</span></label>
          <input id="warningSecondsBefore" class="range" type="range" min="1" max="60" step="1" />
          <div class="help">Choose how many seconds before the limit to play a beep.</div>
        </div>
        <div class="field">
          <label class="label">Play beep when countdown starts</label>
          <div class="row">
            <div id="beepOnStartSwitch" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
            <input id="beepOnStart" type="checkbox" style="display:none;" />
            <span class="help">Play a beep when the timer begins counting down.</span>
          </div>
        </div>
        <div class="field">
          <label class="label">Auto-resume timer (minutes): <span id="autoResumeValue" class="range-value">5</span></label>
          <input id="autoResumeMinutes" class="range" type="range" min="1" max="15" step="1" />
          <div class="help">Auto-start timer when opening social media after being paused for this long.</div>
        </div>
      </div>

      <div class="card">
        <div class="section-title">Sites to Track</div>
        <div class="field">
          <label class="label">Domains (one per line)</label>
          <textarea id="sites" placeholder="facebook.com&#10;youtube.com&#10;reddit.com&#10;twitter.com"></textarea>
          <div class="help">Enter domain names only (no https:// or www.). Subdomains are included.</div>
        </div>
        <div class="field">
          <label class="label">After logout</label>
          <select id="redirect">
            <option value="blocked.html">Built-in block page</option>
            <option value="close">Close all social media pages</option>
            <option value="">Stay on the page</option>
          </select>
          <div class="help">Choose what happens when time runs out.</div>
        </div>
      </div>

      <div class="card">
        <div class="section-title">Appearance & Behavior</div>
        <div class="field">
          <label class="label">Theme color</label>
          <input id="themeColor" type="color" value="#3b82f6" />
          <div class="help">Used for popup progress bar and toggle.</div>
        </div>
        <div class="field">
          <label class="label">Dark mode for popup</label>
          <div class="row">
            <div id="darkSwitch" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
            <input id="darkMode" type="checkbox" style="display:none;" />
            <span class="help">Toggles a darker popup style.</span>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <button id="save" class="save">Save</button>
      <span id="status"></span>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
